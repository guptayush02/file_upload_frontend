(this.webpackJsonpwallet_connection=this.webpackJsonpwallet_connection||[]).push([[0],{126:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(28),l=a.n(r),i=(a(126),a(48)),s=a(15),o=a(18),u=a.n(o),d=a(27),j=a(8),b=a(216),p=a(215),h=a(217),f=a(212),x=a(218),O=a(229),m=a(211),g=a(230),v=a(228),k=a(107),w=a.n(k),S=a(223),y=a(227),C=a(226),L=a(222),z=a(224),A=a(225),T=a(14),D=a(71),I=a.n(D),F=a(45),P={env:"production",API_URL:"http://localhost:3000"};I.a.defaults.baseURL=P.API_URL;var U=function(e){return I.a.post("/api/v1/upload-file",e,{headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("ekanekToken")}}).then((function(e){return e.data}))},E=function(e){var t=e.method,a=void 0===t?"get":t,n=e.url,c=e.data,r=e.params,l=e.extra;return new Promise((function(e,t){var i=Object(T.a)({url:n,method:a},l),s=localStorage.getItem("ekanekToken");s&&(i.headers={token:"".concat(s)}),!["GET","get"].includes(a)&&c&&(i.data=c),r&&(i.params=r),I()(Object(T.a)({},i)).then((function(t){return e(t.data)})).catch(function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:401===n.response.status&&"You have been blocked!"===n.response.data?F.a.error(n.response.data):["get"].includes(a)&&F.a.error("Something went wrong!"),t(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},V=function(e){return E({method:"delete",url:"/api/v1/file/".concat(e)})},Z=a(108),_=a.n(Z),N=a(2),R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function G(){Object(n.useEffect)((function(){fe()}),[]);var e=Object(s.f)(),t=Object(n.useState)([]),a=Object(j.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),o=i[0],k=i[1],T=Object(n.useState)(null),D=Object(j.a)(T,2),I=D[0],Z=D[1],G=Object(n.useState)(null),B=Object(j.a)(G,2),J=B[0],$=B[1],M=Object(n.useState)(null),W=Object(j.a)(M,2),Y=(W[0],W[1],Object(n.useState)(null)),q=Object(j.a)(Y,2),H=q[0],K=q[1],Q=Object(n.useState)(null),X=Object(j.a)(Q,2),ee=(X[0],X[1],Object(n.useState)(!1)),te=Object(j.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(null),re=Object(j.a)(ce,2),le=re[0],ie=re[1],se=Object(n.useState)(null),oe=Object(j.a)(se,2),ue=oe[0],de=oe[1],je=Object(n.useState)(!1),be=Object(j.a)(je,2),pe=be[0],he=be[1],fe=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,he(!0),e.next=4,E({method:"get",url:"/api/v1/files"});case 4:t=e.sent,r(t.body.files),he(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r([]),he(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),t=new FormData,console.log("upload file"),t.append("title",I),t.append("description",J),t.append("file",ue),t.append("fileName",le),e.next=9,U(t);case 9:if(200!==(a=e.sent).code){e.next=15;break}return ne(!1),fe(),k(!1),e.abrupt("return",F.a.success(a.message));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target,de(a.files[0]),ie(a.files[0].name);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:if(200!==(a=e.sent).code){e.next=6;break}return fe(),e.abrupt("return",F.a.success(a.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(b.a,{mt:15,p:2,display:"flex",justifyContent:"center",flexDirection:"column",children:[Object(N.jsxs)(b.a,{sx:{display:"flex",flexDirection:"row",p:1,m:1,bgcolor:"background.paper",justifyContent:"space-between",borderRadius:1},children:[Object(N.jsx)(p.a,{variant:"outlined",onClick:function(){return k(!0)},children:"Upload Form"}),Object(N.jsx)(p.a,{variant:"outlined",component:"span",onClick:function(){localStorage.removeItem("ekanekToken"),e("/login")},children:"Logout"})]}),Object(N.jsx)(b.a,{mt:10}),Object(N.jsx)(L.a,{children:Object(N.jsxs)(S.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(N.jsx)(z.a,{children:Object(N.jsxs)(A.a,{children:[Object(N.jsx)(C.a,{children:"ID"}),Object(N.jsx)(C.a,{align:"right",children:"Title"}),Object(N.jsx)(C.a,{align:"right",children:"Description"}),Object(N.jsx)(C.a,{align:"right",children:"Delete"}),Object(N.jsx)(C.a,{align:"right",children:"Share"})]})}),Object(N.jsx)(y.a,{children:pe?Object(N.jsx)(v.a,{color:"inherit"}):c.length>0?c.map((function(e){return Object(N.jsxs)(A.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(N.jsx)(C.a,{component:"th",scope:"row",children:e.id}),Object(N.jsx)(C.a,{align:"right",children:e.title}),Object(N.jsx)(C.a,{align:"right",children:e.description}),Object(N.jsx)(C.a,{align:"right",children:Object(N.jsx)(h.a,{"aria-label":"delete",children:Object(N.jsx)(w.a,{onClick:function(){return me(e.id)}})})}),Object(N.jsxs)(C.a,{align:"right",children:[Object(N.jsx)(h.a,{"aria-label":"delete",children:Object(N.jsx)(_.a,{onClick:function(){return K(e.id)}})}),H===e.id&&"".concat(P.API_URL,"/public-file?id=").concat(H)]})]},e.id)})):"Files not found"})]})}),Object(N.jsx)(f.a,{open:o,onClose:function(){return k(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(N.jsxs)(b.a,{sx:R,children:[Object(N.jsx)(x.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Upload file"}),Object(N.jsx)(x.a,{id:"modal-modal-description",sx:{mt:2},children:Object(N.jsxs)(O.a,{sx:{flexDirection:{xs:"column",sm:"column"}},children:[Object(N.jsx)(m.a,{hiddenLabel:!0,id:"filled-hidden-label-small",defaultValue:"",variant:"filled",size:"small",type:"text",placeholder:"Title",onChange:function(e){return Z(e.target.value)}}),Object(N.jsx)(b.a,{mt:2}),Object(N.jsx)(m.a,{hiddenLabel:!0,id:"filled-hidden-label-small",defaultValue:"",variant:"filled",size:"small",type:"text",placeholder:"description",onChange:function(e){return $(e.target.value)}}),Object(N.jsx)(b.a,{mt:2}),Object(N.jsxs)("label",{htmlFor:"contained-button-file",children:[Object(N.jsx)(g.a,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",onChange:Oe}),Object(N.jsx)(b.a,{mt:2})]}),Object(N.jsx)(p.a,{variant:"contained",component:"span",onClick:xe,children:ae?Object(N.jsx)(v.a,{color:"inherit"}):"Submit"})]})})]})})]})}function B(){Object(s.f)();var e=Object(i.b)(),t=Object(j.a)(e,2),a=t[0],c=(t[1],Object(n.useState)(a.get("id"))),r=Object(j.a)(c,2),l=r[0],o=r[1],p=Object(n.useState)(null),h=Object(j.a)(p,2),f=(h[0],h[1]);Object(n.useEffect)((function(){o(a.get("id")),x()}),[]);var x=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"get",url:"/api/v1/public-file?id=".concat(l)});case 2:200===(t=e.sent).code&&(f(t.body.publicUrl),window.open(t.body.publicUrl,"_self"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)(b.a,{mt:15,p:2,display:"flex",justifyContent:"center"})}var J=a(219),$=a(109);function M(){var e=Object(n.useState)(null),t=Object(j.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),l=Object(j.a)(r,2),i=l[0],s=l[1],o=Object(n.useState)(null),h=Object(j.a)(o,2),f=h[0],x=h[1],g=Object(n.useState)(!1),v=Object(j.a)(g,2),k=v[0],w=v[1],S=Object(n.useState)(null),y=Object(j.a)(S,2),C=y[0],L=y[1],z=Object(n.useState)(null),A=Object(j.a)(z,2),T=A[0],D=A[1],I=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(i)){e.next=10;break}return w(!1),L(null),t={name:a,email:i,password:f},e.next=6,E({method:"post",url:"/api/v1/signup",data:t});case 6:200===e.sent.code&&(Object($.toast)("Signup successfully"),D("Signup Successfully, Please login")),e.next=12;break;case 10:L("Enter a valid email"),w(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)(b.a,{mt:15,p:2,display:"flex",justifyContent:"center",children:Object(N.jsxs)(O.a,{sx:{flexDirection:{xs:"column",sm:"column"}},children:[Object(N.jsx)(m.a,{hiddenLabel:!0,id:"filled-hidden-label-small",defaultValue:"",variant:"filled",size:"small",placeholder:"Name",onChange:function(e){return c(e.target.value)}}),Object(N.jsx)(b.a,{mt:2}),Object(N.jsx)(m.a,{hiddenLabel:!0,id:"filled-hidden-label-small",defaultValue:"",variant:"filled",size:"small",type:"email",error:!0===k,placeholder:"Email",helperText:C,onChange:function(e){return s(e.target.value)}}),Object(N.jsx)(b.a,{mt:2}),Object(N.jsx)(m.a,{hiddenLabel:!0,id:"filled-hidden-label-small",defaultValue:"",variant:"filled",size:"small",type:"password",placeholder:"Password",onChange:function(e){return x(e.target.value)}}),Object(N.jsx)(b.a,{mt:2}),Object(N.jsx)(p.a,{variant:"outlined",onClick:function(){return I()},children:"Signup"}),Object(N.jsx)(b.a,{sx:{color:"rgb(102, 187, 106)"},children:T}),Object(N.jsx)(b.a,{mt:2}),"Already have an account ",Object(N.jsx)(J.a,{href:"/login",children:"Login"})]})})}function W(){var e=Object(s.f)(),t=Object(n.useState)(null),a=Object(j.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(null),i=Object(j.a)(l,2),o=i[0],h=i[1],f=Object(n.useState)(null),x=Object(j.a)(f,2),g=x[0],v=x[1],k=Object(n.useState)(null),w=Object(j.a)(k,2),S=w[0],y=w[1],C=Object(n.useState)(!1),L=Object(j.a)(C,2),z=L[0],A=L[1],T=function(){var t=Object(d.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e("/dashboard"),!/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(c)){t.next=14;break}return a={email:c,password:o},t.next=5,E({method:"post",url:"/api/v1/login",data:a});case 5:if(n=t.sent,console.log("result---\x3e",n),v(n.message),200!==n.code){t.next=12;break}return t.next=11,localStorage.setItem("ekanekToken",n.body.token);case 11:e("/dashboard");case 12:t.next=16;break;case 14:y("Enter a valid email"),A(!0);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(N.jsx)(b.a,{mt:15,p:2,display:"flex",justifyContent:"center",children:Object(N.jsxs)(O.a,{sx:{flexDirection:{xs:"column",sm:"column"}},children:[Object(N.jsx)(m.a,{hiddenLabel:!0,id:"filled-hidden-label-small",defaultValue:"",variant:"filled",size:"small",type:"email",placeholder:"Email",error:!0===z,helperText:S,onChange:function(e){return r(e.target.value)}}),Object(N.jsx)(b.a,{mt:2}),Object(N.jsx)(m.a,{hiddenLabel:!0,id:"filled-hidden-label-small",defaultValue:"",variant:"filled",size:"small",type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}}),Object(N.jsx)(b.a,{mt:2}),Object(N.jsx)(p.a,{variant:"outlined",onClick:function(){return T()},children:"Login"}),Object(N.jsx)(b.a,{sx:{color:"rgb(102, 187, 106)"},children:g}),Object(N.jsx)(b.a,{mt:2}),"Create a new Account ",Object(N.jsx)(J.a,{href:"/",children:"Signup"})]})})}function Y(){return Object(N.jsx)(i.a,{children:Object(N.jsxs)(s.c,{children:[Object(N.jsx)(s.a,{exact:!0,path:"/",element:Object(N.jsx)(M,{})}),Object(N.jsx)(s.a,{exact:!0,path:"/login",element:Object(N.jsx)(W,{})}),Object(N.jsx)(s.a,{exact:!0,path:"/dashboard",element:Object(N.jsx)(G,{})}),Object(N.jsx)(s.a,{exact:!0,path:"/public-file",element:Object(N.jsx)(B,{})})]})})}var q=function(){return Object(N.jsx)("div",{className:"App flex-grow px-5",children:Object(N.jsx)("header",{className:"App-header",children:Object(N.jsx)(Y,{})})})},H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,232)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),r(e),l(e)}))},K=a(220),Q=a(221);function X(e){var t=e.children;return Object(N.jsxs)(b.a,{sx:{flexGrow:1},style:{position:"sticky"},children:[Object(N.jsx)(K.a,{sx:{bgcolor:"#000"},position:"fixed",children:Object(N.jsx)(Q.a,{children:Object(N.jsx)(x.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"File Upload"})})}),Object(N.jsx)("main",{className:"transition-all duration-500 ease-in-out flex flex-grow bg-white",children:t})]})}function ee(e){var t=e.children;return Object(N.jsx)("div",{children:Object(N.jsx)(X,{children:t})})}l.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(ee,{children:Object(N.jsx)(q,{})})}),document.getElementById("root")),H()}},[[159,1,2]]]);
//# sourceMappingURL=main.03f218ff.chunk.js.map